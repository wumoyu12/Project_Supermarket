import os.path
from os import path

def main():
    print("Welcome to the Fruit Section!")
    FileConnectivity()
    AskFruit()

def FileConnectivity():
    global filename
    filename = "fruit.doc"
    fileexist = path.exists(filename)
    if fileexist:
        print("1-Continue\n2-Back")
    else:
        with open(filename, "w") as pyfile:
            pyfile.write("Fruit Section\n")

def AskFruit():
    global whichfruit
    menu = """We have the following fruits:
1. Apple: $0.98 each
2. Pear: $0.99 each
3. Orange: $0.96 each
4. Pomegranate: $7.50 each
5. Durian Fruit: $25.99 each
Type 01 to check what you bought in Fruit Section
Type 0 to go back to Main Menu"""
    print(menu)
    whichfruit = input("Which type of fruit do you want to buy? ")
    CheckOption()

def CheckOption():
    match whichfruit:
        case "0":
            MainMenu()
        case "01":
            CheckFruit()
        case "1":
            Apple()
        case "2":
            Pear()
        case "3":
            Orange()
        case "4":
            Pomegranate()
        case "5":
            DurianFruit()
        case _:
            print("Invalid selection, please try again")
            AskFruit()

def MainMenu():
    print("Returning to Main Menu...")
    # Assuming there's a main menu function or module to return to

def CheckFruit():
    if not path.exists(filename):
        print("You haven't bought anything yet.")
    else:
        with open(filename, "r") as f:
            lines = f.readlines()
            if len(lines) <= 1:
                print("You didn't buy anything in the Fruit Section.")
            else:
                print("Your purchases in the Fruit Section:")
                for line in lines[1:]:
                    print(line.strip())
    AskFruit()

def Apple():
    fruit = "Apple"
    price = 0.98
    AskNum(fruit, price)

def Pear():
    fruit = "Pear"
    price = 0.99
    AskNum(fruit, price)

def Orange():
    fruit = "Orange"
    price = 0.96
    AskNum(fruit, price)

def Pomegranate():
    fruit = "Pomegranate"
    price = 7.50
    AskNum(fruit, price)

def DurianFruit():
    fruit = "Durian Fruit"
    price = 25.99
    AskNum(fruit, price)

def AskNum(fruit, price):
    global howmany, fruitprice
    while True:
        howmany = input(f"How many {fruit} do you want to buy? ")
        if CheckNum(howmany):
            break
    howmany_int = int(howmany)
    fruitprice = howmany_int * price
    fruitprice = f"{fruitprice:.2f}"
    AddToFile(fruit)

def CheckNum(num):
    if not num:
        print("Input cannot be empty. Please try again.")
        return False
    if not num.isdigit():
        print("Invalid input. Please enter digits only.")
        return False
    if int(num) <= 0:
        print("Quantity must be at least 1. Please try again.")
        return False
    return True

def AddToFile(fruit):
    with open(filename, "a") as pyfile:
        item = f"{fruit} - {howmany}    ${fruitprice}\n"
        pyfile.write(item)
    AskFruit()

if __name__ == "__main__":
    main()
